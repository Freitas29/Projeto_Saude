<template>
  <div>
    <div @click="handleChange" class="input">
      <div class="sun" :key="1" ref="sun">
        <svg
          id="Layer_1"
          height="30"
          viewBox="0 0 512 512"
          width="30"
          xmlns="http://www.w3.org/2000/svg"
          data-name="Layer 1"
        >
          <path
            d="m465.11 287.22-19.33 2.11c-37.73 4.11-54.86 49.62-29.33 77.9l13.08 14.48-18.08-7.18c-35.3-14.03-71.47 18.25-61.91 55.24l4.9 18.96-12.69-14.83c-24.79-28.94-71.71-17.3-80.31 19.94l-4.4 19.07-4.4-19.07c-8.6-37.24-55.52-48.88-80.3-19.94l-12.7 14.83 4.9-18.96c9.56-36.99-26.61-69.27-61.91-55.24l-18.08 7.18 13.08-14.48c25.53-28.28 8.4-73.79-29.33-77.9l-19.33-2.11 18.27-6.7c35.65-13.08 41.48-61.4 9.97-82.7l-16.15-10.91 19.27 2.61c37.61 5.11 65.06-34.95 46.98-68.56l-9.26-17.22 15.86 11.33c30.94 22.13 73.73-.49 73.23-38.71l-.26-19.59 8.81 17.46c17.19 34.08 65.51 34.08 82.7 0l8.81-17.46-.26 19.59c-.5 38.22 42.29 60.84 73.24 38.71l15.85-11.33-9.26 17.22c-18.08 33.61 9.37 73.67 46.98 68.56l19.27-2.61-16.15 10.91c-31.51 21.3-25.68 69.62 9.97 82.7z"
            fill="#eee051"
          />
          <circle cx="257.04" cy="264.84" fill="#f9b248" r="124.84" />
          <path
            d="m162.2 264.84a124.859 124.859 0 0 1 109.84-123.94 126.1 126.1 0 0 0 -15-.9 124.84 124.84 0 0 0 0 249.68 126.1 126.1 0 0 0 15-.9 124.851 124.851 0 0 1 -109.84-123.94z"
            fill="#ef9538"
          />
          <g fill="#fcea6d">
            <path
              d="m446.111 59.925a6 6 0 0 1 -4.242-10.243l3.912-3.912a6 6 0 0 1 8.485 8.485l-3.912 3.912a5.979 5.979 0 0 1 -4.243 1.758z"
            />
            <path
              d="m396.446 109.59a6 6 0 0 1 -4.246-10.242l22.951-22.948a6 6 0 0 1 8.485 8.485l-22.948 22.948a5.982 5.982 0 0 1 -4.242 1.757z"
            />
            <path
              d="m33.26 419.629a6 6 0 0 1 -3.21-11.074l2.693-1.7a6 6 0 1 1 6.409 10.145l-2.693 1.7a5.975 5.975 0 0 1 -3.199.929z"
            />
            <path
              d="m52.888 407.232a6 6 0 0 1 -3.21-11.073l15.8-9.981a6 6 0 0 1 6.408 10.146l-15.8 9.98a5.963 5.963 0 0 1 -3.198.928z"
            />
            <path
              d="m257.04 505.8a6 6 0 0 1 -6-6v-2.691a6 6 0 1 1 12 0v2.691a6 6 0 0 1 -6 6z"
            />
            <path
              d="m367.743 478.077a6 6 0 0 1 -5.243-3.077l-2.6-4.647a6 6 0 1 1 10.475-5.853l2.6 4.646a6 6 0 0 1 -5.232 8.928z"
            />
            <path
              d="m313.076 37.788a6 6 0 0 1 -5.834-7.423l4.309-17.665a6 6 0 0 1 11.658 2.844l-4.309 17.664a6 6 0 0 1 -5.824 4.58z"
            />
            <path
              d="m125.952 507a6 6 0 0 1 -5.061-9.216l3.159-4.976a6 6 0 0 1 10.132 6.429l-3.158 4.977a6 6 0 0 1 -5.072 2.786z"
            />
            <path
              d="m139.3 485.965a6 6 0 0 1 -5.06-9.215l5.727-9.024a6 6 0 1 1 10.131 6.43l-5.726 9.023a6 6 0 0 1 -5.072 2.786z"
            />
            <path
              d="m454.7 401.927a5.97 5.97 0 0 1 -3.018-.819l-8.426-4.916a6 6 0 1 1 6.046-10.365l8.427 4.916a6 6 0 0 1 -3.029 11.184z"
            />
            <path
              d="m484.875 293.73h-3.837a6 6 0 0 1 0-12h3.837a6 6 0 0 1 0 12z"
            />
            <path
              d="m88.614 78.007a5.988 5.988 0 0 1 -4.42-1.94l-6.349-6.91a6 6 0 0 1 8.836-8.119l6.35 6.91a6 6 0 0 1 -4.417 10.059z"
            />
            <path
              d="m117.636 109.59a5.98 5.98 0 0 1 -4.419-1.94l-15.075-16.4a6 6 0 0 1 8.836-8.12l15.075 16.406a6 6 0 0 1 -4.417 10.059z"
            />
            <path
              d="m30.469 180.107a6 6 0 0 1 -2.275-.45l-9.588-3.934a6 6 0 1 1 4.555-11.1l9.588 3.933a6 6 0 0 1 -2.28 11.553z"
            />
            <path
              d="m61.454 192.819a5.979 5.979 0 0 1 -2.275-.451l-12.479-5.121a6 6 0 1 1 4.555-11.1l12.484 5.122a6 6 0 0 1 -2.28 11.552z"
            />
            <path
              d="m452.626 192.819a6 6 0 0 1 -2.256-11.562l38.493-15.605a6 6 0 0 1 4.508 11.121l-38.493 15.6a5.986 5.986 0 0 1 -2.252.446z"
            />
            <path
              d="m207.1 62.776a6 6 0 0 1 -5.846-4.672l-10.404-45.774a6 6 0 1 1 11.7-2.66l10.4 45.775a6.007 6.007 0 0 1 -5.856 7.331z"
            />
            <path
              d="m32.319 295.812a6 6 0 0 1 -.736-11.955l16.645-2.08a6 6 0 0 1 1.489 11.907l-16.646 2.081a6.172 6.172 0 0 1 -.752.047z"
            />
          </g>
          <path
            d="m348.275 253.584a6 6 0 0 1 -5.89-4.893 85.905 85.905 0 0 0 -13.233-32.254 6 6 0 0 1 9.957-6.7 97.841 97.841 0 0 1 15.07 36.737 6.009 6.009 0 0 1 -5.9 7.109z"
            fill="#ef9538"
          />
          <path
            d="m316.094 199.2a5.975 5.975 0 0 1 -3.816-1.373c-2.129-1.757-4.369-3.433-6.658-4.981a6 6 0 1 1 6.722-9.94c2.6 1.76 5.152 3.667 7.574 5.666a6 6 0 0 1 -3.822 10.628z"
            fill="#ef9538"
          />
        </svg>
      </div>
      <div class="night" :key="2" ref="night">
        <svg
          version="1.1"
          id="moon"
          height="20"
          width="20"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          x="0px"
          y="0px"
          viewBox="0 0 512 512"
          style="enable-background:new 0 0 512 512;"
          xml:space="preserve"
        >
          <path
            style="fill:#EDEDEE;"
            d="M230.165,286.029c-63.336-75.033-76.688-175.546-43.503-261.062
	c3.768-9.711-6.02-19.236-15.526-14.979c-22.344,10.003-43.645,23.368-63.174,40.168C-0.144,143.155-13.001,304.673,78.982,413.644
	c92.295,109.34,255.753,123.158,365.093,30.863c19.01-16.046,35.124-34.246,48.298-53.938c5.795-8.662-1.943-19.915-12.153-17.829
	c-25.671,5.244-51.91,6.539-77.775,3.966C337.757,370.27,275.411,339.631,230.165,286.029z"
          />
          <g>
            <path
              style="fill:#DCDBDE;"
              d="M179.993,284.749c55.529,65.784,136.813,96.977,216.576,91.297
		c-62.576-7.664-122.53-38.04-166.403-90.017c-63.336-75.033-76.688-175.546-43.503-261.062c3.768-9.711-6.019-19.236-15.526-14.979
		c-12.772,5.718-25.202,12.54-37.156,20.468C104.048,114.466,118.32,211.686,179.993,284.749z"
            />
            <path
              style="fill:#DCDBDE;"
              d="M480.221,372.74c-12.358,2.524-24.847,4.128-37.363,4.831c1.817,3.481,1.928,7.855-0.656,11.718
		c-13.175,19.691-29.289,37.892-48.298,53.938c-43.559,36.768-95.707,56.677-148.522,60.434
		c69.067,8.466,141.328-10.73,198.694-59.153c19.009-16.046,35.124-34.246,48.298-53.938
		C498.169,381.908,490.432,370.654,480.221,372.74z"
            />
          </g>
          <path
            d="M50.637,118.517c3.619,2.18,8.319,1.012,10.498-2.606c13.817-22.943,31.25-43.546,51.814-61.237
	c18.555-15.962,39.183-29.079,61.311-38.986c2.064-0.924,3.559,0.066,4.267,0.739c0.604,0.573,1.909,2.159,1.003,4.492
	c-35.37,91.148-18.208,194.131,44.79,268.763c39.848,47.207,95.209,79.289,155.884,90.335c0.463,0.084,0.924,0.125,1.379,0.125
	c3.625,0,6.844-2.587,7.516-6.28c0.756-4.156-1.999-8.138-6.155-8.895c-57.189-10.411-109.371-40.652-146.934-85.152
	c-59.385-70.352-75.562-167.434-42.217-253.361c2.862-7.378,1.007-15.665-4.726-21.115c-5.753-5.468-13.822-6.853-21.056-3.613
	c-23.479,10.511-45.36,24.424-65.037,41.351c-21.8,18.753-40.285,40.603-54.942,64.942
	C45.851,111.638,47.018,116.338,50.637,118.517z"
          />
          <path
            d="M498.708,372.166c-4.408-6.565-12.265-9.781-20.018-8.2c-19.318,3.946-39.131,5.611-58.893,4.951
	c-4.245-0.158-7.759,3.167-7.9,7.388c-0.141,4.222,3.167,7.759,7.388,7.9c20.961,0.701,41.974-1.066,62.466-5.252
	c2.445-0.498,3.793,1.05,4.256,1.74c0.545,0.812,1.271,2.456,0.009,4.342c-13.033,19.48-28.804,37.093-46.875,52.346
	c-51.321,43.321-116.448,64.063-183.36,58.405C188.86,490.13,128.148,458.75,84.827,407.43
	C54.185,371.128,34.465,327.331,27.8,280.776c-6.49-45.34-0.469-91.561,17.415-133.666c1.651-3.888-0.162-8.379-4.05-10.031
	c-3.888-1.651-8.379,0.162-10.031,4.05C12.16,185.803,5.771,234.841,12.657,282.943c7.072,49.398,27.985,95.857,60.481,134.354
	c45.956,54.443,110.362,87.731,181.355,93.733c7.669,0.648,15.308,0.97,22.917,0.97c62.823-0.002,123.038-21.937,171.6-62.928
	c19.164-16.177,35.893-34.86,49.722-55.53C503.143,386.949,503.134,378.758,498.708,372.166z"
          />
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
          <g></g>
        </svg>
      </div>
    </div>
  </div>
</template>

<script>
import gsap, { Power1 } from 'gsap'
import { mapState } from 'vuex'

export default {
  computed: { ...mapState(['isDarkMode']) },
  mounted() {
    const el = document.documentElement
    el.style.setProperty('--background', '#ffe66d')
    el.style.setProperty('background', '#E6E6E6')

    var { night, sun } = this.$refs

    if (!this.isDarkMode) {
      sun.style.opacity = 1
      night.style.opacity = 0

      this.moveToLight(sun, night)
    } else {
      sun.style.opacity = 0
      night.style.opacity = 1

      this.moveToDark(sun, night)
    }
  },
  methods: {
    handleChange() {
      const { night, sun } = this.$refs

      if (sun.style.opacity === '0') {
        this.moveToLight(sun, night)
      } else {
        this.moveToDark(sun, night)
      }
    },
    setUp(sun, night) {
      night.style.right = '-15px'
      sun.style.right = '-10px'
      sun.style.top = '-5px'
    },
    moveToLight(sun, night) {
      const el = document.documentElement

      this.$store.commit('changeIsDarkMode', false)
      this.setUp(sun, night)

      el.style.setProperty('--background', '#ffe66d')
      el.style.setProperty('background', '#E6E6E6')

      gsap.to(sun, 1, { x: 0, opacity: 1, ease: Power1.easeInOut })

      gsap.to(night, 1, {
        opacity: 0,
        x: -10,
        transformOrigin: 'center',
        ease: Power1.easeInOut
      })
    },
    moveToDark(sun, night) {
      const el = document.documentElement

      this.setUp(sun, night)

      el.style.setProperty('--background', '#073b4c')
      el.style.setProperty('background', '#fff')

      gsap.to(sun, 1, { x: -35, opacity: 0, ease: Power1.easeInOut })
      gsap.to(night, 1, {
        x: -40,
        transformOrigin: 'center',
        opacity: 1,
        ease: Power1.easeInOut
      })
      this.$store.commit('changeIsDarkMode', true)
    }
  }
}
</script>

<style lang="scss" scoped>
$background: #ffe66d;
* {
  margin: 0;
  padding: 0;
  transition: background 1s ease-in-out;
}

body {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  .input {
    width: 40px;
    height: 20px;
    background-color: var(--background);
    border-radius: 20px;
    position: relative;
    cursor: pointer;
    .sun {
      position: absolute;
    }
    .night {
      position: absolute;
      opacity: 0;
      transform: translate(-40px, 0px) rotate(15deg);
    }
  }
}

.slide-fade-enter-active {
  transition: all 0.3s ease;
}

.slide-fade-leave-active {
  transition: all 0.3s ease;
}

.slide-fade-enter
/* .slide-fade-leave-active em versões anteriores a 2.1.8 */

 {
  animation: animate-trasition 1s;
}

.slide-fade-leave-to {
  animation: animate-trasition 1s reverse;
}

@keyframes animate-trasition {
  0% {
    opacity: 1;
    left: -30px;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    right: -15px;
  }
}
</style>
